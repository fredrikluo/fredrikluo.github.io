(function(){var t="cn.udv.s.readMem",g="cn.udv.s.guessPage",q=10,s=8,h=5,n=s,x=0,w=[],v,B,e=null,A=false,p="guess",l=typeof l=="undefined"?"":l,d=typeof d=="undefined"?"":d,o={localStorage:(function(){var E=window,D="localStorage",C=function(){try{return((D in E)&&E[D])}catch(G){return false}},F={set:function(){},get:function(){return""}};if(C()&&E.JSON){F={set:function(G,I){I=JSON.stringify(I);try{localStorage.setItem(G,I)}catch(H){}},get:function(G){var H=localStorage.getItem(G);return JSON.parse(H)}}}return F})(),filterRepeated:function(G){var E=o.localStorage.get(t)||[],D=E.join("|");var F=[];var H=[];var C=function(J){var L,K="",N="",M=null,I=J.length;for(L=0;L<I;L++){M=J[L];M._url=trim(M.surl||"")||M.url;M._title=trim(M.stitle||"")||M.title.replace("- 手机新浪网","");if(!M||(M&&(!M._url||!M._title))){continue}K=M._url;N=M._title;if(D.indexOf(K)==-1){F.push(M);D+="|"+K}else{H.push(M)}}};C(G);if(F.length<s){F=F.concat(H.slice(0,s-F.length))}return F}};x=parseInt(o.localStorage.get(g))||0;function j(D){var E=function(L,J,K){var G=L.length,H=0,M,I,F=[];K=K||Infinity;J=J||G;for(I=0;I<K;I++){M=H+J;if(M>G){break}F.push(L.slice(H,M));H+=J}return F};var C=E(D,s,h);return C}function i(){var F,E,J=[],G=[],D=0,K=0,M=null,I=B.length,C,L="",H=p==="guess"?"title":"timeout";for(F=0;F<I;F++){J=B[F];D=J.length;if(D==s){G.push('<div class="news_items_module"><ul class="news_items morelistbox">');for(E=0;E<D;E++){M=J[E];C=M._url;if(C.indexOf("?")===-1){C+="?"}else{C+="&"}G.push('<li><a suda-uatrack="key=recmd_wap_news_view&value='+H+'" href="'+C+L+'">'+M._title+"</a></li>");w.push(M.url)}G.push("</ul></div>");K++}}B.length=K;if(x>=K){x=0}return G.join("")}function y(){var C=document.getElementById("j_interest_tpl");if(C.length==0){return}var L=C.children[0],K=document.getElementById("j_update_interest"),D=document.getElementById("j_like_loading"),H="on",G=i(),J=B.length,F=(function(){if(J>1){var P,Q="",O="",N=[];for(P=0;P<J;P++){Q=(P==x)?('class="'+H+'"'):"";N.push("<li "+Q+"><i></i></li>")}O=N.join("");K.innerHTML=O}var R=K.children;return{list:R}})();if(J>1){K.style.display="block"}else{K.style.display="none"}L.removeChild(D);L.innerHTML=G;var M=L.querySelectorAll("a");function I(N){return Math.floor((N+s)/s)-1}L.addEventListener("click",function(S){if(S.target.nodeName.toLocaleLowerCase()=="a"){var V=S.target,O=o.localStorage.get(t)||[],N=V.href.replace("&pos=108&cre=ckhome","");O.push(N);o.localStorage.set(t,O.slice(-q));var Q=Array.prototype.indexOf.call(M,S.target),T=I(Q),U=[];for(var P=T*s,R=(T+1)*s;P<R;P++){if(Q==P){continue}U.push(encodeURIComponent(w[P]))}SUDA.uaTrackLike("recmd_wap_news_view",U.join(","))}},false);var E=new Swiper(C,null,{circular:true,auto:false,callback:function(R,P,S){x=P;var N=F.list;for(var Q=0;Q<N.length;Q++){if(Q==P){addClass(N[Q],"on")}else{removeClass(N[Q],"on")}}o.localStorage.set(g,x);if(window.suda){var O={type:"liketab",name:"tabchange",title:"猜你喜欢",index:x+1};window.suds_count&&window.suds_count(O)}}})}function z(){var C=o.filterRepeated(v.data);B=j(C);y()}function c(){var C="&length="+(s*(h+2))+"&_="+new Date().getTime(),D="http://cre.dp.sina.cn/api/v3/get?cateid=sina_all&fields=surl,stitle,url,title,type&dedup=8&pageid=http://sina.cn&lid=all&cre=sinaw&mod=g&statics=1&merge=3"+C+"&callback=likeDataHandle";createScript(D)}function m(){var C="&top_show_num="+(s*(h+2))+"&_="+new Date().getTime(),D="http://cre.dp.sina.cn/api/v3/get?cateid=sina_all&fields=surl,stitle,url,title,type&dedup=8&pageid=http://sina.cn&lid=all&cre=sinaw&mod=g&statics=1&merge=3"+C+"&callback=topListHandle";createScript(D)}function u(){var D=(new Date()).valueOf();var C="http://api.m.leju.com/?site=api&ctl=api&act=sl&timestamp="+D;createScript(C)}(function(){var E=document.querySelector("#card_auto"),F=E.querySelector(".j_navTab"),D=E.querySelector(".j_newsModule .news_items_module_wrap"),C=document.createElement("li"),G=document.createElement("div");C.className="news_tab_nav";C.id="miaoche_btn";C.innerHTML="降价";G.className="news_items_module hide";G.id="miaoche_content";G.setAttribute("data-sudaclick","ls_miaoche");G.innerHTML='<div class="loading-box">正在载入，请稍候...</div>';F.appendChild(C);D.appendChild(G)})();function a(F){var E=F.target;if(E.id!="miaoche_btn"){return}document.removeEventListener("click",a,false);var D=(new Date()).valueOf();var C="http://www.miaoche.com/api_sinawap/list?callback=miaocheDataHandle&timestamp="+D;createScript(C)}document.addEventListener("click",a,false);window.miaocheDataHandle=function(G){if(G&&G.retCode&&G.retData&&G.retData.tab&&G.retData.tab.miaoche){var F=G.retData.tab.miaoche,I=[];if((!F.pics||(F.pics&&F.pics.length!=0))&&(!F.links||(F.links&&F.links.length!=0))&&(!F.list||(F.list&&F.list.length!=0))){I.push('<ul class="news_pic_items m_b">');for(var D=0,H=F.pics;D<2;D++){I.push('<li><a href="'+H[D].link+'" title="'+H[D].title+'"><img src="'+H[D].src+'" alt="'+H[D].title+'" class="news_pic_img" /><p class="news_pic_info">'+H[D].title+"</p></a></li>")}I.push('</ul><div class="news_hot_card leju">');var C=F.links,J=C.length>3?3:C.length;for(var D=0;D<J;D++){if(C[D].link&&C[D].title){I.push('<a href="'+C[D].link+'" title="'+C[D].title+'">'+C[D].title+"</a>")}}I.push('</div><ul class="news_items">');for(var D=0,E=F.list;D<E.length;D++){I.push('<li><a href="'+E[D].link+'" title="'+E[D].title+'">'+E[D].title+"</a></li>")}I.push('</ul><div class="news_more_tips"><a href="'+F.more.url+'" title="'+F.more.title+'"><span>'+F.more.title+'<em class="news_more_r iconf_icon_enter"></em></span></a></div>')}}document.getElementById("miaoche_content").innerHTML=I.join("");picHeight()};function k(G){var F=location.search.substr(1),H=F.split("&"),I="";for(var E=0,C=H.length;E<C;E++){var D=H[E].split("=");if(D[0]==G){I=D[1]}}return I}function b(){var H=(new Date()).valueOf(),E=k("time");if(E){E="&time="+E}var F=navigator.userAgent.toLowerCase(),G=F.indexOf("ucbrowser")+1?"uc":F.indexOf("baidu")+1?"bd":F.indexOf("qqbrowser")+1?"qq":"no";var C=/iphone|ipad|ipod/.test(F)?"ios":F.indexOf("android")+1?"android":"no";var D="http://s.api.sina.cn/ls/allasync?callback=localStationData&ua="+G+"&pf="+C+"&timestamp="+H+E;createScript(D)}function r(){var E=new Date().getTime(),D=k("df");if(D){D="&df="+D}var C="http://interface.sina.cn/dfz/outside/wap/news/new_langshou_router.d.json?callback=loadLocalInfoData&timestamp="+E+D;createScript(C)}function f(){var C="http://api.weibo.cn/hot/sinamobile?wm=ig_2002&callback=weiboDataHandle";createScript(C)}window.likeDataHandle=function(C){p="guess";if(C&&C.data&&C.data.length>0){A=true;v=C;z()}else{m()}};window.topListHandle=function(C){p="top";C=C.result;A=true;v=C;z()};window.loadLocalInfoData=function(I){var D=document.getElementById("j_localStationWrap"),M=D.querySelector(".j_navTab"),P=D.querySelector(".j_newsModule").children[0];if(I.retData&&I.retData.yaowen&&I.retData.yaowen.list&&I.retData.yaowen.list.top){var C=document.querySelector("#card_yaowen"),G=I.retData.yaowen.list.top,R="",O=C.querySelector(".j_newsModule .news_items");for(var H=0,K=G.length;H<K;H++){R+='<li><a href="'+G[H][0].link+'" title="'+G[H][0].title+'">'+G[H][0].title+"</a></li>"}if(O){O.innerHTML+=R}}if(I&&I.retData&&I.retData.tab){var E=I.retData.tab,J=[],N=[],L=false;removeClass(D,"hide");for(var H in E){if(!L){J.push('<li class="news_tab_nav on">'+E[H].title.title+"</li>");L=true}else{J.push('<li class="news_tab_nav">'+E[H].title.title+"</li>")}N.push('<div class="news_items_module"><ul class="news_items">');for(var F=0,Q=E[H].list.top;F<Q.length;F++){N.push('<li><a href="'+Q[F][0].link+'" title="'+Q[F][0].title+'">'+Q[F][0].title+"</a></li>")}N.push('</ul><div class="news_more_tips"><a href="'+E[H].more.url+'" title="'+E[H].more.title+'"><span>进入'+E[H].more.title+'<em class="news_more_r iconf_icon_enter"></em></span></a></div></div>')}M.innerHTML=J.join("");P.innerHTML=N.join("");tabInit(M.children,P.children);tabNav()}};window.localStationData=function(H){if(H.retData.weather.icon){var C=document.createElement("img"),E=document.getElementById("weather_icon");C.src=H.retData.weather.icon;C.width=22;E.appendChild(C)}if(H.retData.app_recommend&&(H.retData.app_recommend.length===4||H.retData.app_recommend.length===8)){var N=H.retData.app_recommend,I=0,K=N.length,L="";for(;I<K;I++){if(N[I].title&&N[I].url&&N[I].pic){L+='<li><a href="'+N[I].url+'"><img src="'+N[I].pic+'" alt="'+N[I].title+'"/><i class="download_btn"></i><p class="app_title">'+N[I].title+"</p></a></li>"}}document.getElementById("app_down_cont").innerHTML=L}else{var F=document.getElementById("app_recommend");F.parentElement.removeChild(F)}if(H.retData.finance){var L="",D=document.querySelector("#card_finance .j_newsModule .news_items_module_wrap"),F=D.children[0],G=document.createElement("div");if(H.retData.finance.stocks.length!=0){var J=H.retData.finance.stocks;G.className="news_finance_card";G.setAttribute("data-sudaclick","tab_31_stock");L+='<div class="news_finance_card_info fl"><p class="'+J[0]["class"]+'"><strong>'+J[0]["title"]+"</strong><span>"+J[0]["range"]+"%</span><span>"+J[0]["value"]+'</span></p></div><div class="news_finance_card_info fr"><p class="'+J[1]["class"]+'"><strong>'+J[1]["title"]+"</strong><span>"+J[1]["range"]+"%</span><span>"+J[1]["value"]+"</span></p></div>"}else{if(H.retData.finance.tags.length!=0){var M=H.retData.finance.tags;G.className="news_hot_card";for(var I=0,K=M.length;I<K;I++){L+='<a href="'+M[I]["url"]+'" title="'+M[I]["title"]+'">'+M[I]["title"]+"</a>"}}}G.innerHTML=L;F.insertBefore(G,F.children[0])}};window.LejuDataCallback=function(I){var C=document.getElementById("j_lejuWrap"),L=C.querySelector(".j_navTab"),N=C.querySelector(".j_newsModule").children[0];if(I&&I.retCode&&I.retData.tab){var E=I.retData.tab,J=[],M=[],K=false;removeClass(C,"hide");for(var H in E){if((!E[H].pics||(E[H].pics&&E[H].pics.length!=0))&&(!E[H].links||(E[H].links&&E[H].links.length!=0))&&(!E[H].list||(E[H].list&&E[H].list.length!=0))){if(!K){J.push('<li class="news_tab_nav on">'+E[H].title.title+"</li>");K=true}else{J.push('<li class="news_tab_nav">'+E[H].title.title+"</li>")}M.push('<div class="news_items_module"><ul class="news_pic_items m_b">');for(var G=0,D=E[H].pics;G<2;G++){M.push('<li><a href="'+D[G].link+'" title="'+D[G].title+'"><img src="'+D[G].src+'" alt="'+D[G].title+'" class="news_pic_img" /><p class="news_pic_info">'+D[G].title+"</p></a></li>")}M.push('</ul><div class="news_hot_card leju">');var P=E[H].links,F=P.length>3?3:P.length;for(var G=0;G<F;G++){if(P[G].link&&P[G].title){M.push('<a href="'+P[G].link+'" title="'+P[G].title+'">'+P[G].title+"</a>")}}M.push('</div><ul class="news_items">');for(var G=0,O=E[H].list;G<O.length;G++){M.push('<li><a href="'+O[G].link+'" title="'+O[G].title+'">'+O[G].title+"</a></li>")}M.push('</ul><div class="news_more_tips"><a href="'+E[H].more.url+'" title="'+E[H].more.title+'"><span>'+E[H].more.title+'<em class="news_more_r iconf_icon_enter"></em></span></a></div></div>')}}L.innerHTML=J.join("");N.innerHTML=M.join("");tabInit(L.children,N.children);tabNav()}};window.weiboDataHandle=function(G){var F=document.getElementById("j_weiboWrap"),D=F.querySelector(".j_navTab"),C=F.querySelector(".j_newsModule").children[0],I=document.getElementById("j_weiboList");if(G&&G.status&&G.data.length>4){var E=G.data,H=[];H.push('<div class="wb_top_module_card"><a href="'+E[0].url+'" title="'+E[0].title+'"><aside class="wb_top_info h170 wb_num_1"><p><span>TOP 1</span>'+E[0].title+"</p></aside></a></div>");H.push('<div class="wb_top_module_card"><a href="'+E[1].url+'" title="'+E[1].title+'"><aside class="wb_top_info h80 m_b wb_num_2"><p><span>TOP 2</span>'+E[1].title+"</p></aside></a>");H.push('<a href="'+E[2].url+'" title="'+E[2].title+'"><aside class="wb_top_info h80 m_t wb_num_3"><p><span>TOP 3</span>'+E[2].title+"</p></aside></a></div>");H.push('<div class="wb_top_module_card"><a href="'+E[3].url+'" title="'+E[3].title+'"><aside class="wb_top_info h80 m_b"><p><span>TOP 4</span>'+E[3].title+"</p></aside></a>");H.push('<a href="'+E[4].url+'" title="'+E[4].title+'"><aside class="wb_top_info h80 m_t"><p><span>TOP 5</span>'+E[4].title+"</p></aside></a></div>");I.innerHTML=H.join("");tabInit(D.children,I.parentNode.parentNode.children);tabNav()}};c();u();f();b();r()})();